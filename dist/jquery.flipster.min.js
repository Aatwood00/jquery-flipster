(function(t,e,n){"use strict";function i(t,e){var n=null;return function(){var i=this,r=arguments;null===n&&(n=setTimeout(function(){t.apply(i,r),n=null},e))}}var r,a=(r={},function(t){if(r[t]!==n)return r[t];var e=document.createElement("div"),i=e.style,a=t.charAt(0).toUpperCase()+t.slice(1),o=["webkit","moz","ms","o"],s=(t+" "+o.join(a+" ")+a).split(" ");for(var l in s)if(s[l]in i)return r[t]=s[l];return r[t]=!1}),o="http://www.w3.org/2000/svg",s=function(){var t;return function(){if(t!==n)return t;var e=document.createElement("div");return e.innerHTML="<svg/>",t=e.firstChild&&e.firstChild.namespaceURI===o,t}}(),l=t(e),c=a("transform"),u={itemContainer:"ul",itemSelector:"li",start:"center",fadeIn:400,loop:!1,autoplay:!1,pauseOnHover:!0,style:"coverflow",spacing:-.6,click:!0,keyboard:!0,scrollwheel:!0,touch:!0,nav:!1,buttons:!1,buttonPrev:"Previous",buttonNext:"Next",onItemSwitch:!1},f={main:"flipster",active:"flipster--active",container:"flipster__container",nav:"flipster__nav",navChild:"flipster__nav__child",navItem:"flipster__nav__item",navLink:"flipster__nav__link",navCurrent:"flipster__nav__item--current",navCategory:"flipster__nav__item--category",navCategoryLink:"flipster__nav__link--category",button:"flipster__button",buttonPrev:"flipster__button--prev",buttonNext:"flipster__button--next",item:"flipster__item",itemCurrent:"flipster__item--current",itemPast:"flipster__item--past",itemFuture:"flipster__item--future",itemContent:"flipster__item__content"},p=new RegExp("\\b("+f.itemCurrent+"|"+f.itemPast+"|"+f.itemFuture+")(.*?)(\\s|$)","g"),v=new RegExp("\\s\\s+","g");t.fn.flipster=function(e){var r="string"==typeof e;if(r){var a=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this).data("methods");return n[e]?n[e].apply(this,a):this})}var h=t.extend({},u,e);return this.each(function(){function e(t){var e="next"===t?h.buttonNext:h.buttonPrev;return"custom"!==h.buttons&&s?'<svg viewBox="0 0 13 20" xmlns="'+o+'" aria-labelledby="title"><title>'+e+'</title><polyline points="10,3 3,10 10,17"'+("next"===t?' transform="rotate(180 6.5,10)"':"")+"/></svg>":e}function r(n){return n=n||"next",t('<button class="'+f.button+" "+("next"===n?f.buttonNext:f.buttonPrev)+'" role="button" />').html(e(n)).on("click",function(t){x(n),t.preventDefault()})}function a(){h.buttons&&S.length>1&&(H.find("."+f.button).remove(),H.append(r("prev"),r("next")))}function u(){var e={};!h.nav||S.length<=1||(z&&z.remove(),z=t('<ul class="'+f.nav+'" role="navigation" />'),F=t(""),S.each(function(n){var i=t(this),r=i.data("flip-category"),a=i.data("flip-title")||i.attr("title")||n,o=t('<a href="#" class="'+f.navLink+'">'+a+"</a>").data("index",n);if(F=F.add(o),r){if(!e[r]){var s=t('<li class="'+f.navItem+" "+f.navCategory+'">'),l=t('<a href="#" class="'+f.navLink+" "+f.navCategoryLink+'" data-flip-category="'+r+'">'+r+"</a>").data("category",r).data("index",n);e[r]=t('<ul class="'+f.navChild+'" />'),F=F.add(l),s.append(l,e[r]).appendTo(z)}e[r].append(o)}else z.append(o);o.wrap('<li class="'+f.navItem+'">')}),z.on("click","a",function(e){var n=t(this).data("index");n>=0&&(x(n),e.preventDefault())}),"after"===h.nav?H.append(z):H.prepend(z),A=z.find("."+f.navItem))}function d(){if(h.nav){var e=Y.data("flip-category");A.removeClass(f.navCurrent),F.filter(function(){return t(this).data("index")===O||e&&t(this).data("category")===e}).parent().addClass(f.navCurrent)}}function m(){H.css("transition","none"),X.css("transition","none"),S.css("transition","none")}function g(){H.css("transition",""),X.css("transition",""),S.css("transition","")}function _(){var e,n=0;return S.each(function(){e=t(this).height(),e>n&&(n=e)}),n}function y(e){e&&m(),j=X.width(),X.height(_()),j?(N&&(clearInterval(N),N=!1),S.each(function(n){var i,r,a=t(this);a.attr("class",function(t,e){return e&&e.replace(p,"").replace(v," ")}),i=a.outerWidth(),0!==h.spacing&&a.css("margin-right",i*h.spacing+"px"),r=a.position().left,R[n]=-1*(r+i/2-j/2),n===S.length-1&&(b(),e&&setTimeout(g,1))})):N=N||setInterval(function(){y(e)},500)}function b(){var e,i,r,a=S.length;S.each(function(n){e=t(this),i=" ",n===O?(i+=f.itemCurrent,r=a+1):n<O?(i+=f.itemPast+" "+f.itemPast+"-"+(O-n),r=a-(O-n)):(i+=f.itemFuture+" "+f.itemFuture+"-"+(n-O),r=a-(n-O)),e.css("z-index",r).attr("class",function(t,e){return e&&e.replace(p,"").replace(v," ")+i})}),O>=0&&(j&&R[O]!==n||y(!0),c?X.css("transform","translateX("+R[O]+"px)"):X.css({left:R[O]+"px"})),d()}function x(t){var e=O;if(!(S.length<=1))return"prev"===t?O>0?O--:h.loop&&(O=S.length-1):"next"===t?O<S.length-1?O++:h.loop&&(O=0):"number"==typeof t?O=t:t!==n&&(O=S.index(t),h.loop&&e!=O&&(e==S.length-1&&O!=S.length-2&&(O=0),0==e&&1!=O&&(O=S.length-1))),Y=S.eq(O),O!==e&&h.onItemSwitch&&h.onItemSwitch.call(H,S[O],S[e]),b(),H}function w(t){return h.autoplay=t||h.autoplay,clearInterval(U),U=setInterval(function(){var t=O;x("next"),t!==O||h.loop||clearInterval(U)},h.autoplay),H}function C(){return clearInterval(U),U=0,H}function k(t){return C(),h.autoplay&&t&&(U=-1),H}function I(){y(!0),H.hide().css("visibility","").addClass(f.active).fadeIn(h.fadeIn)}function P(){if(X=H.find(h.itemContainer).addClass(f.container),S=X.find(h.itemSelector),!(S.length<=1))return S.addClass(f.item).each(function(){var e=t(this);e.children("."+f.itemContent).length||e.wrapInner('<div class="'+f.itemContent+'" />')}),h.click&&S.on("click.flipster touchend.flipster",function(e){q||(t(this).hasClass(f.itemCurrent)||e.preventDefault(),x(this))}),a(),u(),O>=0&&x(O),H}function L(t){h.keyboard&&(t[0].tabIndex=0,t.on("keydown.flipster",i(function(t){var e=t.which;37!==e&&39!==e||(x(37===e?"prev":"next"),t.preventDefault())},250,!0)))}function D(t){if(h.scrollwheel){var e,n,r=!1,a=0,o=0,s=0,l=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());t.on("mousewheel.flipster wheel.flipster",function(){r=!0}).on("mousewheel.flipster wheel.flipster",i(function(t){clearTimeout(o),o=setTimeout(function(){a=0,s=0},300),t=t.originalEvent,s+=t.wheelDelta||-1*(t.deltaY+t.deltaX),Math.abs(s)<25&&!l||(a++,e=s>0?"prev":"next",n!==e&&(a=0),n=e,(a<6||a%3==0)&&x(e),s=0)},50)),t.on("mousewheel.flipster wheel.flipster",function(t){r&&(t.preventDefault(),r=!1)})}}function E(t){var e,n,i,r,a,o;h.touch&&t.on({"touchstart.flipster":function(t){t=t.originalEvent,e=t.touches?t.touches[0].clientX:t.clientX,n=t.touches?t.touches[0].clientY:t.clientY},"touchmove.flipster":function(t){t=t.originalEvent,i=t.touches?t.touches[0].clientX:t.clientX,r=t.touches?t.touches[0].clientY:t.clientY,o=i-e,a=r-n,Math.abs(o)>30&&Math.abs(a)<100&&t.preventDefault()},"touchend.flipster touchcancel.flipster ":function(){o=i-e,a=r-n,Math.abs(o)>30&&Math.abs(a)<100&&x(o>0?"prev":"next")}})}function M(){var t;if(H.css("visibility","hidden"),P(),S.length<=1)H.css("visibility","");else{t=!!h.style&&"flipster--"+h.style.split(" ").join(" flipster--"),H.addClass([f.main,c?"flipster--transform":" flipster--no-transform",t,h.click?"flipster--click":""].join(" ")),h.start&&(O="center"===h.start?Math.floor(S.length/2):h.start),x(O);var e=H.find("img");if(e.length){var n=0;e.on("load",function(){n++,n>=e.length&&I()}),setTimeout(I,750)}else I();l.on("resize.flipster",i(y,400)),h.autoplay&&w(),h.pauseOnHover&&X.on("mouseenter.flipster",function(){U?k(!0):C()}).on("mouseleave.flipster",function(){-1===U&&w()}),L(H),D(X),E(X)}}var T,X,j,N,S,Y,z,A,F,H=t(this),R=[],O=0,U=!1,q=!1;T={jump:x,next:function(){return x("next")},prev:function(){return x("prev")},play:w,stop:C,pause:k,index:P},H.data("methods",T),H.hasClass(f.active)||M()})}})(jQuery,window);